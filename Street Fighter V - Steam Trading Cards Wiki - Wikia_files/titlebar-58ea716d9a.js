define(["base_ui_module","zeus_utils","zeus_constants"],function(e,i,n){var o="5px",s="3%",a=i.css,r=i.dom,l=e.subclass({constructor:function(t){e.prototype.constructor.call(this,t),this._container=r.getUI(n.UI.TITLE_BAR),this.text=null,this._keepOpen=!1},init:function(){t=this,PlayerState.on(PlayerState.STATE_CHANGED,function(){switch(PlayerState.state){case PlayerState.START:case PlayerState.PAUSED:case PlayerState.ENDED:this.open();break;case PlayerState.RELATED_VIDEOS:break;case PlayerState.PLAYING:setTimeout(function(){t.close()},1e3)}},this),this.setTitle(CurrentVideoConfig.settings.title),View.addEventListener(n.Player.Event.CONFIG_CHANGED,function(){this.setTitle(CurrentVideoConfig.settings.title)},this),View.addEventListener(n.UI.Event.PLAYER_CHANGED,function(){this.setTitle(CurrentVideoConfig.settings.title),View.currentPlayer.isAd()?this.close():this.open()},this),View.addEventListener(n.UI.Event.MOUSE_OUT,function(t){t.target===window.Skin&&PlayerState.state!=PlayerState.START&&this.close()},this),View.addEventListener(n.UI.Event.MOUSE_OVER,function(t){View.currentPlayer.isAd()||this.open()},this)},setTitle:function(t){this.text=t;var e=r.getUI(n.UI.TITLE_TEXT);e&&(e.textContent=t)},allowAutoHide:function(t){var e=this;t?a.hasClass(e._container,"_hide-mouseout")&&(a.removeClass(e._container,"_hide-mouseout"),a.addClass(e._container,"bolt-hide-mouseout")):a.hasClass(e._container,"bolt-hide-mouseout")&&(a.removeClass(e._container,"bolt-hide-mouseout"),a.addClass(e._container,"_hide-mouseout")),e._keepOpen=!t,e._keepOpen&&e.open()},updateAppearance:function(){var t=window.PlayerSettings.appearance,e=t.controlbar.corner;"rounded"===e?a.inject(".bolt-top-bar{ border-radius:"+o+" !important; }"):"sharp"===e&&a.inject(".bolt-top-bar { border-radius:0 !important; }");var i=t.controlbar.position;if("floating"===i){var n=100-2*parseFloat(s)+"%";a.inject(".bolt-top-bar{ top:"+s+" !important;left:"+s+";right:"+s+";width:"+n+"; }")}else"docked"===i&&a.inject(".bolt-top-bar{ top:0 !important; left:0;right:0; width:100% }")},close:function(){this._keepOpen||e.prototype.close.call(this)}});return l});