define(["base_controlbar","zeus_utils","zeus_constants",window.addons.shifty],function(t,e,l,n){var s,r,m=e.dom,u=(e.css,window),o=t.subclass({constructor:function(e){t.prototype.constructor.call(this,e),s=window.View,r=window.PlayerSettings,this.timeTextSeparator=" of ",this._animationEndCallback=this._animationEndCallback.bind(this),this._animationStartCallback=this._animationStartCallback.bind(this),this._openTween=new n,this._closeTween=new n},init:function(){t.prototype.init.call(this);var e=this;e._setupControlBarAnims(),r.bigButton===!1&&e.open(),PlayerState.on(PlayerState.STATE_CHANGED,function(){switch(PlayerState.state){case PlayerState.PLAYING:client.isMobile&&e.close()}},e);var l=u.ContentPlayer;"flash"!=l.type&&(l.video.addEventListener("webkitendfullscreen",function(){client.system.iphone&&e.open()}),l.video.addEventListener("webkitbeginfullscreen",function(){console.log("BEGINNNNNNNNN")}))},_animationStartCallback:function(){var t=this,l=e.animation;l.removeListener(l.events.start,t._container,t._animationStartCallback),t._animationIsRunning=!0},_animationEndCallback:function(){var t=e.animation,l=this;t.removeListener(t.events.end,l._container,l._animationEndCallback),l._animationIsRunning=!1,"in"===l.animationType&&l.invalidate()},open:function(){if(r.preview||0==r.bigButton||PlayerState.state!==PlayerState.START&&PlayerState.state!==PlayerState.ENDED){var t=this;if(!t.isOpen){t.isOpen=!0,LOG.info("orion control bar open"),this._container.style.visibility="visible",this._container.style.display="block";var e=getComputedStyle(t._container),n=parseFloat(e.bottom),i=parseFloat(e.opacity);LOG.info("controlbar open",t._container,n,i),t._closeTween.stop(),t._openTween.tween({from:{bottom:n,opacity:i},to:{bottom:0,opacity:1},duration:500,start:function(){},step:function(e){var l=t._container.style;l.bottom=parseFloat(e.bottom)+"px",l.opacity=e.opacity}}),m.enableUI(l.UI.PLAY_PAUSE_BTN,!0),s._scrubber&&s._scrubber.open()}}},close:function(){if(!r.preview){var t=this;if(!t._keepOpen&&t.isOpen!==!1&&(t.isOpen=!1,s._playlistMenu&&s._playlistMenu.close(),!s.currentPlayer.isAd())){s._scrubber&&s._scrubber.close();var e=getComputedStyle(t._container),l=parseFloat(e.bottom),n=parseFloat(e.opacity);LOG.info("controlbar close",t._container,l,n);var i=client.isMobile?-50:-44;t._openTween.stop(),t._closeTween.tween({from:{bottom:l,opacity:n},to:{bottom:i,opacity:0},duration:500,delay:client.isMobile?1e3:0,start:function(){LOG.info("Orion CONTROLBAR: CLOSE TWEEN START")},step:function(e){var l=t._container.style;l.bottom=parseFloat(e.bottom)+"px",l.opacity=e.opacity}})}}},updateAppearance:function(){},_setupControlBarAnims:function(){var t=new n,e=new n,l=new n,s=new n,r=(new n,new n),m=new n,u=(new n,!1),o=new n,c=new n;PlayerState.on(PlayerState.STATE_CHANGED,function(){switch(console.log("**********PLAYER STATE*************",PlayerState.state),PlayerState.state){case"playing":o.tween({from:{a:34.351746,b:9.364854,c:96,d:47.149944,e:96,f:256.5,g:34.351746,h:294.364868,i:96,j:47.149944,k:256.5,l:150,m:163.138947,n:215.418686,o:96,p:256.5},to:{a:0,b:9.364854,c:113,d:9.36,e:113,f:285,g:0,h:285,i:176,j:9.364854,k:289,l:9.364854,m:289,n:285,o:176,p:285},duration:500,easing:"easeOutQuad",step:function(t){document.getElementById("poly1").setAttribute("points",t.a+","+t.b+" "+t.c+","+t.d+" "+t.e+","+t.f+" "+t.g+","+t.h),document.getElementById("poly2").setAttribute("points",t.i+","+t.j+" "+t.k+","+t.l+" "+t.m+","+t.n+" "+t.o+","+t.p)},start:function(){},finish:function(){}});break;case"paused":c.tween({to:{a:34.351746,b:9.364854,c:96,d:47.149944,e:96,f:256.5,g:34.351746,h:294.364868,i:96,j:47.149944,k:266.648254,l:150,m:163.138947,n:215.418686,o:96,p:256.5},from:{a:0,b:9.364854,c:113,d:9.36,e:113,f:285,g:0,h:285,i:176,j:9.364854,k:289,l:9.364854,m:289,n:285,o:176,p:285},duration:500,easing:"easeOutQuad",step:function(t){document.getElementById("poly1").setAttribute("points",t.a+","+t.b+" "+t.c+","+t.d+" "+t.e+","+t.f+" "+t.g+","+t.h),document.getElementById("poly2").setAttribute("points",t.i+","+t.j+" "+t.k+","+t.l+" "+t.m+","+t.n+" "+t.o+","+t.p)},start:function(){},finish:function(){}})}}),document.getElementById("fullscreen-icon").addEventListener("click",function(){document.getElementById("fullscreen-icon").getAttribute("data-state")}),document.getElementById("fullscreen-icon").addEventListener("mouseenter",function(){document.getElementById("fullscreen-icon").getAttribute("data-state");t.tween({from:{scaleX:0,scaleY:0,x:12,y:9,opacity:0},to:{scaleX:24,scaleY:18,x:0,y:0,opacity:1},duration:750,easing:"easeOutQuad",step:function(t){document.getElementById("fullscreen-bg").setAttribute("width",t.scaleX),document.getElementById("fullscreen-bg").setAttribute("height",t.scaleY),document.getElementById("fullscreen-bg").setAttribute("x",t.x),document.getElementById("fullscreen-bg").setAttribute("y",t.y),document.getElementById("fullscreen-bg").style.opacity=t.opacity}}),e.tween({from:{tl1x:0,tl1y:0,tr1x:18,tr1y:0,tr2x:21,tr2y:0,br1x:18,br1y:15,br2x:21,br2y:12,bl1x:0,bl1y:15,bl2x:0,bl2y:12,scaleX:6,scaleY:6},to:{tl1x:0,tl1y:0,tr1x:12,tr1y:0,tr2x:21,tr2y:0,br1x:12,br1y:15,br2x:21,br2y:9,bl1x:0,bl1y:15,bl2x:0,bl2y:9,scaleX:12,scaleY:9},duration:750,easing:"easeOutQuad",step:function(t){document.getElementById("fullscreen-elem-tl1").setAttribute("width",t.scaleX),document.getElementById("fullscreen-elem-tl1").setAttribute("x",t.tl1x),document.getElementById("fullscreen-elem-tl1").setAttribute("y",t.tl1y),document.getElementById("fullscreen-elem-tl2").setAttribute("height",t.scaleY),document.getElementById("fullscreen-elem-tl2").setAttribute("x",t.tl1x),document.getElementById("fullscreen-elem-tl2").setAttribute("y",t.tl1y),document.getElementById("fullscreen-elem-tr1").setAttribute("width",t.scaleX),document.getElementById("fullscreen-elem-tr1").setAttribute("x",t.tr1x),document.getElementById("fullscreen-elem-tr1").setAttribute("y",t.tr1y),document.getElementById("fullscreen-elem-tr2").setAttribute("height",t.scaleY),document.getElementById("fullscreen-elem-tr2").setAttribute("x",t.tr2x),document.getElementById("fullscreen-elem-tr2").setAttribute("y",t.tr2y),document.getElementById("fullscreen-elem-bl1").setAttribute("width",t.scaleX),document.getElementById("fullscreen-elem-bl1").setAttribute("x",t.bl1x),document.getElementById("fullscreen-elem-bl1").setAttribute("y",t.bl1y),document.getElementById("fullscreen-elem-bl2").setAttribute("height",t.scaleY),document.getElementById("fullscreen-elem-bl2").setAttribute("x",t.bl2x),document.getElementById("fullscreen-elem-bl2").setAttribute("y",t.bl2y),document.getElementById("fullscreen-elem-br1").setAttribute("width",t.scaleX),document.getElementById("fullscreen-elem-br1").setAttribute("x",t.br1x),document.getElementById("fullscreen-elem-br1").setAttribute("y",t.br1y),document.getElementById("fullscreen-elem-br2").setAttribute("height",t.scaleY),document.getElementById("fullscreen-elem-br2").setAttribute("x",t.br2x),document.getElementById("fullscreen-elem-br2").setAttribute("y",t.br2y)},finish:function(){document.getElementById("fullscreen-icon").setAttribute("data-state","on")}})}),document.getElementById("fullscreen-icon").addEventListener("mouseleave",function(){document.getElementById("fullscreen-icon").getAttribute("data-state");l.tween({to:{scaleX:0,scaleY:0,x:12,y:9,opacity:0},from:{scaleX:24,scaleY:18,x:0,y:0,opacity:1},duration:750,easing:"easeOutQuad",step:function(t){document.getElementById("fullscreen-bg").setAttribute("width",t.scaleX),document.getElementById("fullscreen-bg").setAttribute("height",t.scaleY),document.getElementById("fullscreen-bg").setAttribute("x",t.x),document.getElementById("fullscreen-bg").setAttribute("y",t.y),document.getElementById("fullscreen-bg").style.opacity=t.opacity}}),s.tween({to:{tl1x:0,tl1y:0,tr1x:18,tr1y:0,tr2x:21,tr2y:0,br1x:18,br1y:15,br2x:21,br2y:12,bl1x:0,bl1y:15,bl2x:0,bl2y:12,scaleX:6,scaleY:6},from:{tl1x:0,tl1y:0,tr1x:12,tr1y:0,tr2x:21,tr2y:0,br1x:12,br1y:15,br2x:21,br2y:9,bl1x:0,bl1y:15,bl2x:0,bl2y:9,scaleX:12,scaleY:9},duration:750,easing:"easeOutQuad",step:function(t){document.getElementById("fullscreen-elem-tl1").setAttribute("width",t.scaleX),document.getElementById("fullscreen-elem-tl1").setAttribute("x",t.tl1x),document.getElementById("fullscreen-elem-tl1").setAttribute("y",t.tl1y),document.getElementById("fullscreen-elem-tl2").setAttribute("height",t.scaleY),document.getElementById("fullscreen-elem-tl2").setAttribute("x",t.tl1x),document.getElementById("fullscreen-elem-tl2").setAttribute("y",t.tl1y),document.getElementById("fullscreen-elem-tr1").setAttribute("width",t.scaleX),document.getElementById("fullscreen-elem-tr1").setAttribute("x",t.tr1x),document.getElementById("fullscreen-elem-tr1").setAttribute("y",t.tr1y),document.getElementById("fullscreen-elem-tr2").setAttribute("height",t.scaleY),document.getElementById("fullscreen-elem-tr2").setAttribute("x",t.tr2x),document.getElementById("fullscreen-elem-tr2").setAttribute("y",t.tr2y),document.getElementById("fullscreen-elem-bl1").setAttribute("width",t.scaleX),document.getElementById("fullscreen-elem-bl1").setAttribute("x",t.bl1x),document.getElementById("fullscreen-elem-bl1").setAttribute("y",t.bl1y),document.getElementById("fullscreen-elem-bl2").setAttribute("height",t.scaleY),document.getElementById("fullscreen-elem-bl2").setAttribute("x",t.bl2x),document.getElementById("fullscreen-elem-bl2").setAttribute("y",t.bl2y),document.getElementById("fullscreen-elem-br1").setAttribute("width",t.scaleX),document.getElementById("fullscreen-elem-br1").setAttribute("x",t.br1x),document.getElementById("fullscreen-elem-br1").setAttribute("y",t.br1y),document.getElementById("fullscreen-elem-br2").setAttribute("height",t.scaleY),document.getElementById("fullscreen-elem-br2").setAttribute("x",t.br2x),document.getElementById("fullscreen-elem-br2").setAttribute("y",t.br2y)}})}),document.getElementById("fullscreen-icon").addEventListener("mousedown",function(){var t=document.getElementById("fullscreen-icon").getAttribute("data-state");u=!0,document.getElementById("fullscreen-icon").setAttribute("data-state","off"===t?"on":"off"),r.tween({to:{color1:"#3498db",color2:"#ffffff"},from:{color1:"#ffffff",color2:"#3498db"},duration:750,easing:"easeOutQuad",step:function(t){for(elems=document.getElementsByClassName("fullscreen-btn-elem"),i=0;i<elems.length;i++)elems[i].setAttribute("fill",t.color1),elems[i].style.fill=t.color1;document.getElementById("fullscreen-bg").setAttribute("fill",t.color2),document.getElementById("fullscreen-bg").style.fill=t.color2}})}),document.getElementById("fullscreen-icon").addEventListener("mouseup",function(){document.getElementById("fullscreen-icon").getAttribute("data-state");u=!1,m.tween({from:{color1:"#3498db",color2:"#ffffff"},to:{color1:"#ffffff",color2:"#3498db"},duration:750,easing:"easeOutQuad",step:function(t){for(elems=document.getElementsByClassName("fullscreen-btn-elem"),i=0;i<elems.length;i++)elems[i].setAttribute("fill",t.color1),elems[i].style.fill=t.color1;document.getElementById("fullscreen-bg").setAttribute("fill",t.color2),document.getElementById("fullscreen-bg").style.fill=t.color2},finish:function(){}})});var d=document.getElementById("playlist-btn");if(d){var g=new n;d.addEventListener("click",function(){var t=document.getElementById("playlist-btn").getAttribute("data-state");return"off"===t?void g.tween({from:{tri1:0,tri2:3.75,tri3:6.570491,tri4:8.958333,tri5:0,tri6:14.395833,sm1X:4.5,sm1Y:0,sm2X:4.5,sm2Y:4,sm4X:4.5,sm4Y:12,sm5X:4.5,sm5Y:16,lgW:15,lgH:2,lg1X:9,lg1Y:0,lg2X:9,lg2Y:4,lg3X:9,lg3Y:8,lg4X:9,lg4Y:12,lg5X:9,lg5Y:16},to:{tri1:7.5,tri2:18,tri3:13,tri4:13,tri5:18,tri6:18,sm1X:5,sm1Y:11,sm2X:8.5,sm2Y:11,sm4X:15.5,sm4Y:11,sm5X:19,sm5Y:11,lgW:2,lgH:9,lg1X:5,lg1Y:0,lg2X:8.5,lg2Y:0,lg3X:12,lg3Y:0,lg4X:15.5,lg4Y:0,lg5X:19,lg5Y:0},duration:1500,easing:"easeOutQuad",step:function(t){document.getElementById("playlist-tri").setAttribute("points",t.tri1+","+t.tri2+" "+t.tri3+","+t.tri4+" "+t.tri5+","+t.tri6),document.getElementById("lg1").setAttribute("width",t.lgW),document.getElementById("lg1").setAttribute("height",t.lgH),document.getElementById("lg2").setAttribute("width",t.lgW),document.getElementById("lg2").setAttribute("height",t.lgH),document.getElementById("lg3").setAttribute("width",t.lgW),document.getElementById("lg3").setAttribute("height",t.lgH),document.getElementById("lg4").setAttribute("width",t.lgW),document.getElementById("lg4").setAttribute("height",t.lgH),document.getElementById("lg5").setAttribute("width",t.lgW),document.getElementById("lg5").setAttribute("height",t.lgH),document.getElementById("lg1").setAttribute("x",t.lg1X),document.getElementById("lg1").setAttribute("y",t.lg1Y),document.getElementById("lg2").setAttribute("x",t.lg2X),document.getElementById("lg2").setAttribute("y",t.lg2Y),document.getElementById("lg3").setAttribute("x",t.lg3X),document.getElementById("lg3").setAttribute("y",t.lg3Y),document.getElementById("lg4").setAttribute("x",t.lg4X),document.getElementById("lg4").setAttribute("y",t.lg4Y),document.getElementById("lg5").setAttribute("x",t.lg5X),document.getElementById("lg5").setAttribute("y",t.lg5Y),document.getElementById("sm1").setAttribute("x",t.sm1X),document.getElementById("sm1").setAttribute("y",t.sm1Y),document.getElementById("sm2").setAttribute("x",t.sm2X),document.getElementById("sm2").setAttribute("y",t.sm2Y),document.getElementById("sm4").setAttribute("x",t.sm4X),document.getElementById("sm4").setAttribute("y",t.sm4Y),document.getElementById("sm5").setAttribute("x",t.sm5X),document.getElementById("sm5").setAttribute("y",t.sm5Y)},finish:function(){document.getElementById("playlist-btn").setAttribute("data-state","on")}}):void g.tween({from:{tri1:7.5,tri2:18,tri3:13,tri4:13,tri5:18,tri6:18,sm1X:5,sm1Y:11,sm2X:8.5,sm2Y:11,sm4X:15.5,sm4Y:11,sm5X:19,sm5Y:11,lgW:2,lgH:9,lg1X:5,lg1Y:0,lg2X:8.5,lg2Y:0,lg3X:12,lg3Y:0,lg4X:15.5,lg4Y:0,lg5X:19,lg5Y:0},to:{tri1:0,tri2:3.75,tri3:6.570491,tri4:8.958333,tri5:0,tri6:14.395833,sm1X:4.5,sm1Y:0,sm2X:4.5,sm2Y:4,sm4X:4.5,sm4Y:12,sm5X:4.5,sm5Y:16,lgW:15,lgH:2,lg1X:9,lg1Y:0,lg2X:9,lg2Y:4,lg3X:9,lg3Y:8,lg4X:9,lg4Y:12,lg5X:9,lg5Y:16},duration:1500,easing:"easeOutQuad",step:function(t){document.getElementById("playlist-tri").setAttribute("points",t.tri1+","+t.tri2+" "+t.tri3+","+t.tri4+" "+t.tri5+","+t.tri6),document.getElementById("lg1").setAttribute("width",t.lgW),document.getElementById("lg1").setAttribute("height",t.lgH),document.getElementById("lg2").setAttribute("width",t.lgW),document.getElementById("lg2").setAttribute("height",t.lgH),document.getElementById("lg3").setAttribute("width",t.lgW),document.getElementById("lg3").setAttribute("height",t.lgH),document.getElementById("lg4").setAttribute("width",t.lgW),document.getElementById("lg4").setAttribute("height",t.lgH),document.getElementById("lg5").setAttribute("width",t.lgW),document.getElementById("lg5").setAttribute("height",t.lgH),document.getElementById("lg1").setAttribute("x",t.lg1X),document.getElementById("lg1").setAttribute("y",t.lg1Y),document.getElementById("lg2").setAttribute("x",t.lg2X),document.getElementById("lg2").setAttribute("y",t.lg2Y),document.getElementById("lg3").setAttribute("x",t.lg3X),document.getElementById("lg3").setAttribute("y",t.lg3Y),document.getElementById("lg4").setAttribute("x",t.lg4X),document.getElementById("lg4").setAttribute("y",t.lg4Y),document.getElementById("lg5").setAttribute("x",t.lg5X),document.getElementById("lg5").setAttribute("y",t.lg5Y),document.getElementById("sm1").setAttribute("x",t.sm1X),document.getElementById("sm1").setAttribute("y",t.sm1Y),document.getElementById("sm2").setAttribute("x",t.sm2X),document.getElementById("sm2").setAttribute("y",t.sm2Y),document.getElementById("sm4").setAttribute("x",t.sm4X),document.getElementById("sm4").setAttribute("y",t.sm4Y),document.getElementById("sm5").setAttribute("x",t.sm5X),document.getElementById("sm5").setAttribute("y",t.sm5Y)},finish:function(){document.getElementById("playlist-btn").setAttribute("data-state","off")}})})}}});return o});